{"version":3,"sources":["../../src/schema/index.js"],"names":[],"mappings":";;;;;;;;;;IAAM,M;AAEJ,kBAAY,MAAZ,EAAkC;AAAA,QAAd,OAAc,yDAAJ,EAAI;;AAAA;;AAChC,SAAK,OAAL,GAAe,OAAO,MAAP,CAAc,EAAd,EAAkB;AAC/B,cAAQ;AADuB,KAAlB,EAEZ,OAFY,CAAf;;AAIA,SAAK,MAAL,GAAe,MAAf;AACD;;;;;;;;;;;+BAOkB;AAAA;;AAAA,UAAV,GAAU,yDAAJ,EAAI;;;AAEjB,UAAI,MAAM,SAAV;;;AAGA,aAAO,IAAP,CAAY,KAAK,MAAjB,EAAyB,OAAzB,CAAkC,UAAC,GAAD,EAAS;;;AAGzC,YAAG,CAAC,MAAK,OAAL,CAAa,MAAd,IAAwB,CAAC,IAAI,GAAJ,CAA5B,EAAsC;;;AAGtC,YAAI,aAAa,MAAK,MAAL,CAAY,GAAZ,CAAjB;;;AAGA,YAAI,UAAU,IAAI,GAAJ,CAAd;;;;;;;;AAQA,YAAG,WAAW,IAAX,IAAmB,UAAnB,IAAiC,WAAW,OAAX,CAAmB,IAAvD,EAA6D;AAC3D,oBAAU,IAAI,IAAd;AACD;;AAED,YAAI,SAAS,WAAW,WAAW,IAAtB,EAA4B,OAA5B,CAAb;;AAEA,YAAG,OAAO,GAAV,EAAe;AACb,cAAG,CAAC,GAAJ,EAAS,MAAM,EAAN;;AAET,cAAI,IAAJ,CAAS;AACP,uBAAW,GADJ;AAEP,mBAAO,OAAO;AAFP,WAAT;AAID;AAEF,OAhCD;;AAkCA,aAAO;AACL;AADK,OAAP;AAID;;;;;;kBAIY,M","file":"index.js","sourcesContent":["class Schema {\n\n  constructor(schema, options = {}) {\n    this.options = Object.assign({}, {\n      strict: true\n    }, options)\n\n    this.schema  = schema\n  }\n\n  /**\n   * Takes a pkg and determines if it is valid.\n   * @param {object} pkg The object to determine if it matches the schema.\n   * @todo Schema should support nested objects\n   */\n  validate(pkg = {}) {\n\n    var err = undefined\n\n    // For each schema rule\n    Object.keys(this.schema).forEach( (key) => {\n\n      // If schema is not strict & the package is missing the property\n      if(!this.options.strict && !pkg[key]) return\n\n      // The Schema Type class instance that the property is said to, such as: type('string')\n      var schemaType = this.schema[key]\n\n      // The value if the property we want to test againt respective property\n      var propVal = pkg[key]\n\n      /*\n      NOTE: If the schema type is a password, and the package has a hash.\n      This offers flexability for apps where the password is tested, validated, etc.\n      Before reaching Eisley. This allows the developer to attach the result of said\n      password handling to the \"hash\" property instead.\n      */\n      if(schemaType.type == 'password' && schemaType.options.hash) {\n        propVal = pkg.hash\n      }\n\n      var result = schemaType[schemaType.type](propVal)\n\n      if(result.err) {\n        if(!err) err = []\n\n        err.push({\n          schemaKey: key,\n          error: result.err\n        })\n      }\n\n    })\n\n    return {\n      err\n    }\n\n  }\n\n}\n\nexport default Schema\n"]}